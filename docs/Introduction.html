<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Introduction to Python for the practicing neuroscientist – BU MA665+MA666</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/monaco-editor@0.46.0/min/vs/editor/editor.main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
  
<style type="text/css">
.monaco-editor pre {
  background-color: unset !important;
}

.qpyodide-editor-toolbar {
  width: 100%;
  display: flex;
  justify-content: space-between;
  box-sizing: border-box;
}

.qpyodide-editor-toolbar-left-buttons, .qpyodide-editor-toolbar-right-buttons {
  display: flex;
}

.qpyodide-non-interactive-loading-container.qpyodide-cell-needs-evaluation, .qpyodide-non-interactive-loading-container.qpyodide-cell-evaluated {
  justify-content: center;
  display: flex;
  background-color: rgba(250, 250, 250, 0.65);
  border: 1px solid rgba(233, 236, 239, 0.65);
  border-radius: 0.5rem;
  margin-top: 15px;
  margin-bottom: 15px;
}

.qpyodide-r-project-logo {
  color: #2767B0; /* R Project's blue color */
}

.qpyodide-icon-status-spinner {
  color: #7894c4;
}

.qpyodide-icon-run-code {
  color: #0d9c29
}

.qpyodide-output-code-stdout {
  color: #111;
}

.qpyodide-output-code-stderr {
  color: #db4133;
}

.qpyodide-editor {
  border: 1px solid #EEEEEE;
}

.qpyodide-editor-toolbar {
  background-color: #EEEEEE;
  padding: 0.2rem 0.5rem;
}

.qpyodide-button {
  background-color: #EEEEEE;
  display: inline-block;
  font-weight: 400;
  line-height: 1;
  text-decoration: none;
  text-align: center;
  color: #000;
  border-color: #dee2e6;
  border: 1px solid rgba(0,0,0,0);
  padding: 0.375rem 0.75rem;
  font-size: .9rem;
  border-radius: 0.25rem;
  transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}

.qpyodide-button:hover {
  color: #000;
  background-color: #d9dce0;
  border-color: #c8ccd0;
}

.qpyodide-button:disabled,.qpyodide-button.disabled,fieldset:disabled .qpyodide-button {
  pointer-events: none;
  opacity: .65
}

.qpyodide-button-reset {
  color: #696969; /*#4682b4;*/
}

.qpyodide-button-copy {
  color: #696969;
}


/* Custom styling for RevealJS Presentations*/

/* Reset the style of the interactive area */
.reveal div.qpyodide-interactive-area {
  display: block;
  box-shadow: none;
  max-width: 100%;
  max-height: 100%;
  margin: 0;
  padding: 0;
} 

/* Provide space to entries */
.reveal div.qpyodide-output-code-area pre div {
  margin: 1px 2px 1px 10px;
}

/* Collapse the inside code tags to avoid extra space between line outputs */
.reveal pre div code.qpyodide-output-code-stdout, .reveal pre div code.qpyodide-output-code-stderr {
  padding: 0;
  display: contents;
}

.reveal pre div code.qpyodide-output-code-stdout {
  color: #111;
}

.reveal pre div code.qpyodide-output-code-stderr {
  color: #db4133;
}


/* Create a border around console and output (does not effect graphs) */
.reveal div.qpyodide-console-area {
  border: 1px solid #EEEEEE;
  box-shadow: 2px 2px 10px #EEEEEE;
}

/* Cap output height and allow text to scroll */
/* TODO: Is there a better way to fit contents/max it parallel to the monaco editor size? */
.reveal div.qpyodide-output-code-area pre {
  max-height: 400px;
  overflow: scroll;
}
</style>
<script type="module">
// Document level settings ----

// Determine if we need to install python packages
globalThis.qpyodideInstallPythonPackagesList = [''];

// Check to see if we have an empty array, if we do set to skip the installation.
globalThis.qpyodideSetupPythonPackages = !(qpyodideInstallPythonPackagesList.indexOf("") !== -1);

// Display a startup message?
globalThis.qpyodideShowStartupMessage = true;

// Describe the webR settings that should be used
globalThis.qpyodideCustomizedPyodideOptions = {
  "indexURL": "https://cdn.jsdelivr.net/pyodide/v0.26.1/full/",
  "env": {
    "HOME": "/home/pyodide",
  }, 
  stdout: (text) => {qpyodideAddToOutputArray(text, "out");},
  stderr: (text) => {qpyodideAddToOutputArray(text, "error");}
}

// Store cell data
globalThis.qpyodideCellDetails = [{"code":"import numpy as np\nimport matplotlib.pyplot as plt\nimport pandas as pd\n\ndf = pd.read_csv(\"https://raw.githubusercontent.com/Mark-Kramer/BU-MA665-MA666/master/Data/Rhythms_1.csv\")\nd = np.array(df.iloc[:,0])\nt = np.array(df.iloc[:,1])\n\n# Print useful information about the data.\nprint(\"Sampling frequency is \" + str( 1/(t[2]-t[1]))  + ' Hz.')\nprint(\"Total duration of recording is \" + str(t[-1]) + ' s.')\nprint(\"Dimensions of data are \" + str(np.shape(d)) + ' data points.')\n\n# Choose an initial interval of time, from onset to 5 s,\ninitial_time_interval = t < 5        \n\n# ... and plot it.\nplt.plot(t[initial_time_interval], d[initial_time_interval])\nplt.xlabel('Time [s]')\nplt.ylabel('Data')\nplt.title('Initial interval of data');\nplt.show()","id":1,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"4+9","id":2,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"4/3","id":3,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"4/10**2","id":4,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import numpy as np\nimport matplotlib.pyplot as plt\nimport math","id":5,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"np.sin(2*np.pi)","id":6,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"math.atan(2*np.pi)","id":7,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import numpy as np\na = np.array([[1, 2, 3, 4]])\nprint(a)","id":8,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"a = np.array( [[1, 2, 3, 4]] )\nprint( a * 3 )\nprint( 4 * a )\nprint( a + 1 )","id":9,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import numpy as np\na = np.array([1,2,3,4])\na * a","id":10,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import numpy as np\na = 2\nb = np.array( [[0, 4, 7, 6]] )\nc = np.array( [[1, 5, 6, 8]] )\n\nprint( b * c )\nprint( b / c + a)\nprint( np.multiply( b, c ))","id":11,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"a = np.array([[1,2,3,4]])\nprint(a.shape)\nprint(np.shape(a))","id":12,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import numpy as np\n\np = np.array( [[1,2,3],[4,5,6]] )","id":13,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"print( p )","id":14,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"print( p + 2 )\nprint( 2 * p )\nprint( p * p )","id":15,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import numpy as np\na = np.array( [1, 2, 3, 4, 5] )\nb = np.array( [6, 7, 8, 9, 10] )","id":16,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"print( \"a[1] = \" + str(a[1]) )\nprint( \"b[1] = \" + str(b[1]) )","id":17,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"c = np.array([a,b])\nprint( \"c = \\n\" + str(c) )    # \\n is a newline, or carriage return, which makes the printed matrix lineup better ","id":18,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"print( \"shape of c = \" + str( np.shape(c) ) )","id":19,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"print( \"c[0,3] = \" + str( c[0,3] ) )","id":20,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"print( \"c[0,:] = \" + str( c[0,:] ) )\nprint( \"2nd through 4th columns of the first row are c[0,1:4] = \" + str(c[0,1:4]) )","id":21,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"print(\"c[0, :4] = \" + str( c[0,:4]))\nprint(\"c[0, 1:] = \" + str( c[0,1:]))","id":22,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"c[0,::2]","id":23,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"a = np.arange(1,10)    # this creates a vector of increasing values from 1 to 9\na = 2*a \n\nprint( \"a = \" + str(a) )","id":24,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"a[a > 10]","id":25,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"lgIdx = a > 10\nlgIdx","id":26,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"a[lgIdx]","id":27,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"lgIdx.nonzero()","id":28,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"a[ (a > 10).nonzero() ]","id":29,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"print(\"a = \" + str(a))\na[a > 10] = 100\nprint(\"a = \" + str(a))","id":30,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"b = np.array([[1,2,3],[4,5,6],[7,8,9]])\nprint( \"b = \\n\" + str(b) )\nprint( \" b > 5 is \\n\" + str(b > 5) )\nprint(\" b[b>5] is an array: \" + str(b[b>5]) )","id":31,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import numpy as np\n\nx = np.linspace(0,10,11)   \nprint( \"x = \" + str(x) )\n\n#   The above line constructs a vector that starts at 0, ends at 10, and\n#   has 11 entries (takes steps of size 1 from 0 to 10). Let\n\ny = np.sin(x)\nprint( \"y = \" + str(y) )","id":32,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import matplotlib.pyplot as plt\nx = ([1, 2, 3, 4])\ny = x\nplt.figure()\nplt.plot(x,y) \nplt.show()          # this is the plotting equivalent of print()","id":33,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"x = np.linspace(0,10,11)   \ny = np.sin(x)\n\nplt.figure()\nplt.plot(x, y)\nplt.show()","id":34,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import numpy as np\nx = np.linspace(0,10, 101)\nprint(x)","id":35,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"y = np.sin(x)\nplt.figure()\nplt.plot(x,y,'k')   # the 'k' we've added makes the curve black instead of blue\nplt.show()","id":36,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import numpy as np\nx = np.linspace(0,10, 101)\nz = np.cos(x)","id":37,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import matplotlib.pyplot as plt\nplt.figure()\nplt.plot(x,z)\nplt.show()","id":38,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"y = np.sin(x)\nplt.figure()\nplt.plot(x,z)                     # plot z vs x.\nplt.plot(x,y,'r')                 # plot y vs x in red\nplt.show()","id":39,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"plt.figure()\nplt.plot(x,z)                     # plot z vs x\nplt.plot(x,y,'r')                 # plot y vs x in red\nplt.xlabel('x')                   # x-axis label\nplt.ylabel('y or z')              # y-axis label\nplt.title('y vs x and z vs x')    # title\nplt.legend(('y','z'))             # make a legend labeling each line\nplt.show()","id":40,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"plt.figure()\nplt.plot(x,y, label='y')     # sometimes it is easier to name a trace within the plot() call\nplt.plot(x,z, label='z')     # notice without a color matplotlib will assign one\nplt.xlabel('x', fontsize=14)\nplt.ylabel('y', fontsize=14)\nplt.title('y vs x', fontsize=18)\nplt.legend(fontsize=12)\nplt.show()","id":41,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import numpy as np\n\nprint(\"a Gaussian random number (mean=0, variance=1): \" + str( np.random.randn() ))\n\n# a uniform random number on [0,1)\nprint(\"a uniform random number from [0,1): \" + str(np.random.rand()))","id":42,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"r = np.random.randn(1000)","id":43,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import matplotlib.pyplot as plt\nplt.figure()\nplt.hist(r)\nplt.show()","id":44,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import numpy as np\nimport matplotlib.pyplot as plt\n\nx = np.arange(0,10,0.1) # Define a vector x that ranges from 0 to 9.9 with step 0.1.\nk = 1                # Fix k=1,\ny = np.sin(x + k*np.pi/4)  # ... and define y at this k.\n\nplt.figure()               # Make a new figure,\nplt.plot(x,y)              # ... and plot y versus x.\n\nk = 2                # Let's repeat this, for k=2,\ny = np.sin(x + k*np.pi/4)  # ... and redefine y at this k,\nplt.plot(x,y)              # ... and plot it.\n\nk = 3                      # Let's repeat this, for k=3,\ny = np.sin(x + k*np.pi/4)  # ... and redefine y at this k,\nplt.plot(x,y)              # ... and plot it.\n\nk = 4                      # Let's repeat this, for k=4,\ny = np.sin(x + k*np.pi/4)  # ... and redefine y at this k,\nplt.plot(x,y)              # ... and plot it.\n\nk = 5                      # Let's repeat this, for k=5,\ny = np.sin(x + k*np.pi/4)  # ... and redefine y at this k,\nplt.plot(x,y)              # ... and plot it.\n\nplt.show()","id":45,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"x = np.arange(0,10,0.1)     #First, define the vector x.","id":46,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"plt.figure()\nfor k in range(1,6):               \n    y = np.sin(x + k*np.pi/4) #Define y (note the variable 'k' in sin), also note we have indented here!\n    plt.plot(x,y)             #Plot y versus x\n     \n# no indentation now, so this code follows the loop\nplt.show()","id":47,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"def my_square_function(x, c):\n    \"\"\"Square a vector and add a constant.\n\n    Arguments:\n    x -- vector to square\n    c -- constant to add to the square of x\n    \n    Returns:\n    x*x + c\n    \"\"\"\n    \n    return x * x + c","id":48,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import numpy as np\nv = np.linspace(0.,10.,11)\nb = 2.5\n\n# Now let's run the code,\nv2 = my_square_function(v, b)\nprint(\"v = \" + str(v))\nprint(\"v*v+2.5 = \" + str(v2))","id":49,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import pandas as pd","id":50,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"df = pd.read_csv(\"https://raw.githubusercontent.com/Mark-Kramer/BU-MA665-MA666/master/Data/Rhythms_1.csv\")\ndf.info()","id":51,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"print(df)","id":52,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import numpy as np\nd = np.array(df.iloc[:,0])  #Get the values associated with the first column of the dataframe\nt = np.array(df.iloc[:,1])  #Get the values associated with the first column of the dataframe","id":53,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import matplotlib.pyplot as plt\n\n# Choose a subset to plot\nt = t[0:500]\nd = d[0:500]\n\nplt.figure()\nplt.plot(t, d)\nplt.title('My plot')\nplt.xlabel('Time [s]')\nplt.ylabel('Voltage [mV]')\nplt.show()","id":54,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt","id":55,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"mu = np.mean(d)\nsd = np.std(d)","id":56,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"samps = np.random.normal(mu, sd, 500)","id":57,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}},{"code":"plt.figure()\nplt.hist(samps)\nplt.hist(d)\nplt.show()","id":58,"options":{"warning":"true","results":"markup","output":"true","fig-height":5,"read-only":"false","fig-width":7,"comment":"","classes":"","context":"interactive","fig-cap":"","message":"true","label":"","out-height":"","out-width":"700px","autorun":"","dpi":72}}];


</script>
<script type="module">
// Declare startupMessageqpyodide globally
globalThis.qpyodideStartupMessage = document.createElement("p");

// Function to set the button text
globalThis.qpyodideSetInteractiveButtonState = function(buttonText, enableCodeButton = true) {
  document.querySelectorAll(".qpyodide-button-run").forEach((btn) => {
    btn.innerHTML = buttonText;
    btn.disabled = !enableCodeButton;
  });
}

// Function to update the status message in non-interactive cells
globalThis.qpyodideUpdateStatusMessage = function(message) {
  document.querySelectorAll(".qpyodide-status-text.qpyodide-cell-needs-evaluation").forEach((elem) => {
    elem.innerText = message;
  });
}

// Function to update the status message
globalThis.qpyodideUpdateStatusHeader = function(message) {

  if (!qpyodideShowStartupMessage) return;

  qpyodideStartupMessage.innerHTML = message;
}

// Status header update with customized spinner message
globalThis.qpyodideUpdateStatusHeaderSpinner = function(message) {

  qpyodideUpdateStatusHeader(`
    <i class="fa-solid fa-spinner fa-spin qpyodide-icon-status-spinner"></i>
    <span>${message}</span>
  `);
}


// Function that attaches the document status message
function qpyodideDisplayStartupMessage(showStartupMessage) {
  if (!showStartupMessage) {
    return;
  }

  // Get references to header elements
  const headerHTML = document.getElementById("title-block-header");
  const headerRevealJS = document.getElementById("title-slide");

  // Create the outermost div element for metadata
  const quartoTitleMeta = document.createElement("div");
  quartoTitleMeta.classList.add("quarto-title-meta");

  // Create the first inner div element
  const firstInnerDiv = document.createElement("div");
  firstInnerDiv.setAttribute("id", "qpyodide-status-message-area");

  // Create the second inner div element for "Pyodide Status" heading and contents
  const secondInnerDiv = document.createElement("div");
  secondInnerDiv.setAttribute("id", "qpyodide-status-message-title");
  secondInnerDiv.classList.add("quarto-title-meta-heading");
  secondInnerDiv.innerText = "Pyodide Status";

  // Create another inner div for contents
  const secondInnerDivContents = document.createElement("div");
  secondInnerDivContents.setAttribute("id", "qpyodide-status-message-body");
  secondInnerDivContents.classList.add("quarto-title-meta-contents");

  // Describe the Pyodide state
  qpyodideStartupMessage.innerText = "🟡 Loading...";
  qpyodideStartupMessage.setAttribute("id", "qpyodide-status-message-text");
  // Add `aria-live` to auto-announce the startup status to screen readers
  qpyodideStartupMessage.setAttribute("aria-live", "assertive");

  // Append the startup message to the contents
  secondInnerDivContents.appendChild(qpyodideStartupMessage);

  // Combine the inner divs and contents
  firstInnerDiv.appendChild(secondInnerDiv);
  firstInnerDiv.appendChild(secondInnerDivContents);
  quartoTitleMeta.appendChild(firstInnerDiv);

  // Determine where to insert the quartoTitleMeta element
  if (headerHTML || headerRevealJS) {
    // Append to the existing "title-block-header" element or "title-slide" div
    (headerHTML || headerRevealJS).appendChild(quartoTitleMeta);
  } else {
    // If neither headerHTML nor headerRevealJS is found, insert after "Pyodide-monaco-editor-init" script
    const monacoScript = document.getElementById("qpyodide-monaco-editor-init");
    const header = document.createElement("header");
    header.setAttribute("id", "title-block-header");
    header.appendChild(quartoTitleMeta);
    monacoScript.after(header);
  }
}

qpyodideDisplayStartupMessage(qpyodideShowStartupMessage);
</script>
<script type="module">
// Create a logging setup
globalThis.qpyodideMessageArray = []

// Add messages to array
globalThis.qpyodideAddToOutputArray = function(message, type) {
  qpyodideMessageArray.push({ message, type });
}

// Function to reset the output array
globalThis.qpyodideResetOutputArray = function() {
  qpyodideMessageArray = [];
}

globalThis.qpyodideRetrieveOutput = function() {
  return qpyodideMessageArray.map(entry => entry.message).join('\n');
}

// Start a timer
const initializePyodideTimerStart = performance.now();

// Encase with a dynamic import statement
globalThis.qpyodideInstance = await import(
  qpyodideCustomizedPyodideOptions.indexURL + "pyodide.mjs").then(
   async({ loadPyodide }) => {

    console.log("Start loading Pyodide");
    
    // Populate Pyodide options with defaults or new values based on `pyodide`` meta
    let mainPyodide = await loadPyodide(
      qpyodideCustomizedPyodideOptions
    );
    
    // Setup a namespace for global scoping
    // await loadedPyodide.runPythonAsync("globalScope = {}"); 
    
    // Update status to reflect the next stage of the procedure
    qpyodideUpdateStatusHeaderSpinner("Initializing Python Packages");

    // Load the `micropip` package to allow installation of packages.
    await mainPyodide.loadPackage("micropip");
    await mainPyodide.runPythonAsync(`import micropip`);

    // Load the `pyodide_http` package to shim uses of `requests` and `urllib3`.
    // This allows for `pd.read_csv(url)` to work flawlessly.
    // Details: https://github.com/coatless-quarto/pyodide/issues/9
    await mainPyodide.loadPackage("pyodide_http");
    await mainPyodide.runPythonAsync(`
    import pyodide_http
    pyodide_http.patch_all()  # Patch all libraries
    `);

    // Load the `matplotlib` package with necessary environment hook
    await mainPyodide.loadPackage("matplotlib");

    // Set the backend for matplotlib to be interactive.
    await mainPyodide.runPythonAsync(`
    import matplotlib
    matplotlib.use("module://matplotlib_pyodide.html5_canvas_backend")
    from matplotlib import pyplot as plt
    `);

    // Unlock interactive buttons
    qpyodideSetInteractiveButtonState(
      `<i class="fa-solid fa-play qpyodide-icon-run-code"></i> <span>Run Code</span>`, 
      true
    );

    // Set document status to viable
    qpyodideUpdateStatusHeader(
      "🟢 Ready!"
    );

    // Assign Pyodide into the global environment
    globalThis.mainPyodide = mainPyodide;

    console.log("Completed loading Pyodide");
    return mainPyodide;
  }
);

// Stop timer
const initializePyodideTimerEnd = performance.now();

// Create a function to retrieve the promise object.
globalThis._qpyodideGetInstance = function() {
    return qpyodideInstance;
}

</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">BU MA665+MA666</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./Introduction.html" aria-current="page"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./IF.html"> 
<span class="menu-text">I&amp;F</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./HH.html"> 
<span class="menu-text">HH</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Perceptron.html"> 
<span class="menu-text">Perceptron</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Backpropagation.html"> 
<span class="menu-text">Backprop</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Regression.html"> 
<span class="menu-text">Regression</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Rhythms_1.html"> 
<span class="menu-text">Rhythms Intro</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#starting-python" id="toc-starting-python" class="nav-link active" data-scroll-target="#starting-python">Starting Python</a></li>
  <li><a href="#on-ramp-analysis-of-neural-data-in-python" id="toc-on-ramp-analysis-of-neural-data-in-python" class="nav-link" data-scroll-target="#on-ramp-analysis-of-neural-data-in-python">On-ramp: analysis of neural data in Python</a></li>
  <li><a href="#example-1-python-is-a-calculator" id="toc-example-1-python-is-a-calculator" class="nav-link" data-scroll-target="#example-1-python-is-a-calculator">Example 1: Python is a calculator</a></li>
  <li><a href="#example-2.-python-can-compute-complicated-quantities." id="toc-example-2.-python-can-compute-complicated-quantities." class="nav-link" data-scroll-target="#example-2.-python-can-compute-complicated-quantities.">Example 2. Python can compute complicated quantities.</a></li>
  <li><a href="#example-3.-python-has-useful-built-in-functions." id="toc-example-3.-python-has-useful-built-in-functions." class="nav-link" data-scroll-target="#example-3.-python-has-useful-built-in-functions.">Example 3. Python has useful built in functions.</a></li>
  <li><a href="#example-4.-we-can-use-python-to-define-lists-of-numbers." id="toc-example-4.-we-can-use-python-to-define-lists-of-numbers." class="nav-link" data-scroll-target="#example-4.-we-can-use-python-to-define-lists-of-numbers.">Example 4. We can use Python to define lists of numbers.</a></li>
  <li><a href="#example-5.-we-can-manipulate-arrays-by-scalars." id="toc-example-5.-we-can-manipulate-arrays-by-scalars." class="nav-link" data-scroll-target="#example-5.-we-can-manipulate-arrays-by-scalars.">Example 5. We can manipulate arrays by scalars.</a></li>
  <li><a href="#example-6.-we-can-manipulate-arrays-with-arrays." id="toc-example-6.-we-can-manipulate-arrays-with-arrays." class="nav-link" data-scroll-target="#example-6.-we-can-manipulate-arrays-with-arrays.">Example 6. We can manipulate arrays with arrays.</a></li>
  <li><a href="#example-7.-more-examples-of-manipulating-arrays-with-arrays." id="toc-example-7.-more-examples-of-manipulating-arrays-with-arrays." class="nav-link" data-scroll-target="#example-7.-more-examples-of-manipulating-arrays-with-arrays.">Example 7. More examples of manipulating arrays with arrays.</a></li>
  <li><a href="#example-8.-we-can-probe-the-variables-weve-defined-in-python." id="toc-example-8.-we-can-probe-the-variables-weve-defined-in-python." class="nav-link" data-scroll-target="#example-8.-we-can-probe-the-variables-weve-defined-in-python.">Example 8. We can probe the variables we’ve defined in Python.</a></li>
  <li><a href="#example-9.-determine-the-dimensions-of-an-array" id="toc-example-9.-determine-the-dimensions-of-an-array" class="nav-link" data-scroll-target="#example-9.-determine-the-dimensions-of-an-array">Example 9. Determine the dimensions of an array</a></li>
  <li><a href="#example-10.-sometimes-we-need-to-reset-the-workspace" id="toc-example-10.-sometimes-we-need-to-reset-the-workspace" class="nav-link" data-scroll-target="#example-10.-sometimes-we-need-to-reset-the-workspace">Example 10. Sometimes we need to reset the workspace</a></li>
  <li><a href="#example-11.-we-can-define-matrices-in-python." id="toc-example-11.-we-can-define-matrices-in-python." class="nav-link" data-scroll-target="#example-11.-we-can-define-matrices-in-python.">Example 11. We can define matrices in Python.</a></li>
  <li><a href="#example-12.-indexing-matrices-and-vectors." id="toc-example-12.-indexing-matrices-and-vectors." class="nav-link" data-scroll-target="#example-12.-indexing-matrices-and-vectors.">Example 12. Indexing matrices and vectors.</a></li>
  <li><a href="#example-13-we-can-find-subsets-of-elements-in-matrices-and-vectors." id="toc-example-13-we-can-find-subsets-of-elements-in-matrices-and-vectors." class="nav-link" data-scroll-target="#example-13-we-can-find-subsets-of-elements-in-matrices-and-vectors.">Example 13: We can find subsets of elements in matrices and vectors.</a></li>
  <li><a href="#example-14-plotting-data-in-python." id="toc-example-14-plotting-data-in-python." class="nav-link" data-scroll-target="#example-14-plotting-data-in-python.">Example 14: Plotting data in Python.</a></li>
  <li><a href="#example-15-what-if-we-want-to-compare-several-functions" id="toc-example-15-what-if-we-want-to-compare-several-functions" class="nav-link" data-scroll-target="#example-15-what-if-we-want-to-compare-several-functions">Example 15: What if we want to compare several functions?</a></li>
  <li><a href="#example-16-we-can-make-random-numbers-in-python." id="toc-example-16-we-can-make-random-numbers-in-python." class="nav-link" data-scroll-target="#example-16-we-can-make-random-numbers-in-python.">Example 16: We can make random numbers in Python.</a></li>
  <li><a href="#example-17-repeating-commands-over-and-over-and-over-.-.-." id="toc-example-17-repeating-commands-over-and-over-and-over-.-.-." class="nav-link" data-scroll-target="#example-17-repeating-commands-over-and-over-and-over-.-.-.">Example 17: Repeating commands over and over and over . . .</a></li>
  <li><a href="#example-18-defining-a-new-function." id="toc-example-18-defining-a-new-function." class="nav-link" data-scroll-target="#example-18-defining-a-new-function.">Example 18: Defining a new function.</a></li>
  <li><a href="#example-19-load-data-into-python" id="toc-example-19-load-data-into-python" class="nav-link" data-scroll-target="#example-19-load-data-into-python">Example 19: Load data into Python</a></li>
  <li><a href="#example-20-compute-statistics-and-compare" id="toc-example-20-compute-statistics-and-compare" class="nav-link" data-scroll-target="#example-20-compute-statistics-and-compare">Example 20: Compute statistics and compare</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">
<script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.46.0/min/vs/loader.js"></script>
<script type="module" id="qpyodide-monaco-editor-init">

  // Configure the Monaco Editor's loader
  require.config({
    paths: {
      'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@0.46.0/min/vs'
    }
  });
</script>

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Introduction to Python for the practicing neuroscientist</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>To be frank: this notebook is rather boring. In this class, we will use the software package <a href="https://www.python.org/" rel="external">Python</a>. The best way to learn new software (and probably most things) is when motivated by a particular problem. Would you read assembly instructions for furniture you do not plan to own? Probably not. In other notebooks we will pursue specific questions driven by neuronal data, and use our desire to understand these data to motivate the development and application of computational methods. But not in this notebook. Here, we focus on basic coding techniques and principles in Python in the abstract, without motivation. You - poor learner - must trust that these ideas and techniques will eventually be useful. We begin by dipping our toe into the Python pool, and learning the basic strokes; the fun and interesting parts in the “real world” of neuronal data happen later.</p>
<p>Let us delay no further. In the following examples, you are asked to execute code in Python. If your Python experience is limited, you should actually <em>do</em> this, not just read the text below. If you intend to ignore this advice - and not execute the code in Python - then instead walk to the local coffee shop, get a double espresso, and return to attempt these examples.</p>
<p>This notebook follows in spirit and sometimes in detail notebook 2 of <a href="https://www.elsevier.com/books/matlab-for-neuroscientists/wallisch/978-0-12-383836-0" rel="external">MATLAB for Neuroscientists</a>, an excellent reference for learning to use MATLAB in neuroscience with many additional examples. If you have not used Python before, there are many excellent resources online (e.g., the <a href="https://jakevdp.github.io/PythonDataScienceHandbook/" rel="external">Python Data Science Handbook</a>).</p>
<section id="starting-python" class="level3">
<h3 class="anchored" data-anchor-id="starting-python">Starting Python</h3>
<p>There are two ways to interact with this notebook. First, you could run it locally on your own computer using <a href="https://jupyter.org/" rel="external">Jupyter</a>. This is an excellent choice, because you’ll be able to read, edit, and excute the Python code directly and you can save any changes you make or notes that you want to record. The second way is to open this notebook in your browser and execute the examples directly in your browser, without installing additional software on your computer. In any case, we encourage you to execute each line of code in this file!</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Throughout this notebook, we assume that you are running <a href="https://www.python.org/download/releases/3.0/" rel="external">Python 3</a>. Most of the functions used here are the same in Python 2 and 3. One noteable exception however is division. If you are using Python 2, you will find that the division operator <code>/</code> actually computes the <em>floor</em> of the division if both operands are integers (i.e., no decimal points). For example, in Python 2, <code>4/3</code> equals <code>1</code>. While, in Python 3, <code>4/3</code> equals <code>1.333</code>.</p>
<p>We encourage you to use Python 3 for the sake of compatibility with this notebook, as well as for compatibility with future releases of Python.</p>
</div>
</div>
</section>
<section id="on-ramp-analysis-of-neural-data-in-python" class="level3">
<h3 class="anchored" data-anchor-id="on-ramp-analysis-of-neural-data-in-python">On-ramp: analysis of neural data in Python</h3>
<p>We begin this notebook with an “<em>on-ramp</em>” to analysis in Python. The purpose of this on-ramp is to introduce you immediately to some aspects of Python. You may not understand all aspects of the Python language here, but that’s not the point. Instead, the purpose of this on-ramp is to illustrate what <em>can</em> be done. Our advice is to simply run the code below and see what happens…</p>
<div id="qpyodide-insertion-location-1"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q:</strong> Try to read the code above. Can you see how it loads data, extracts useful information to print, then selects an interval of data to plot?</p>
<p><strong>A:</strong> If you’ve never used Python before, that’s an especially difficult question. Please continue on to learn more!</p>
</div>
</div>
</div>
</section>
<section id="example-1-python-is-a-calculator" class="level3">
<h3 class="anchored" data-anchor-id="example-1-python-is-a-calculator">Example 1: Python is a calculator</h3>
<p>Execute the following commands in Python:</p>
<div id="qpyodide-insertion-location-2"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div id="qpyodide-insertion-location-3"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q:</strong> What does Python return? Does it make sense?</p>
</div>
</div>
</div>
</section>
<section id="example-2.-python-can-compute-complicated-quantities." class="level3">
<h3 class="anchored" data-anchor-id="example-2.-python-can-compute-complicated-quantities.">Example 2. Python can compute complicated quantities.</h3>
<p>Enter the following command in Python:</p>
<div id="qpyodide-insertion-location-4"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q:</strong> Does this answer make sense?</p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q:</strong> Can you use parentheses to change the answer?</p>
</div>
</div>
</div>
</section>
<section id="example-3.-python-has-useful-built-in-functions." class="level3">
<h3 class="anchored" data-anchor-id="example-3.-python-has-useful-built-in-functions.">Example 3. Python has useful built in functions.</h3>
<p>A function is a program that operates on arguments. Standard math functions and variables (and other useful things) can be accessed from the <code>math</code> and <code>numpy</code> modules. To use the <code>math</code> and <code>numpy</code> modules, we must first import both:</p>
<div id="qpyodide-insertion-location-5"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In this style, we indicate which module, or <em>namespace</em>, contains the function we want to call: <code>x = np.arange(10)</code> or <code>plt.plot(x, y)</code>.</p>
</div>
</div>
<p>You will often begin your data analysis with <code>import</code> statements, to load the functionality you need. We can now call functions from math using <code>numpy.*</code>. For example,</p>
<div id="qpyodide-insertion-location-6"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>Above, <code>sin</code> is the sine function. It operates on the argument <code>2*pi</code>. Notice that, once we have imported the <code>numpy</code> module, Python knows the value of <code>pi</code>. Here’s another example function that operates on arguments:</p>
<div id="qpyodide-insertion-location-7"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q:</strong> What is <code>math.atan</code>?</p>
<p><strong>A:</strong> To answer this, try using Python Help. To start the Python Help, simply put a <code>?</code> at the end of <code>math.atan</code> and then run this code block.</p>
</div>
</div>
</div>
<div id="cell-24" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>math.atan?</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>You should see a description of the function pop up at the bottom of the window.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Python Help is <em>extremely</em> useful, but may not work in a web browser. You can always look there when you have questions about a function, or search the internet for help, i.e., <a href="http://www.google.com" rel="external">google it</a>.</p>
</div>
</div>
</section>
<section id="example-4.-we-can-use-python-to-define-lists-of-numbers." class="level3">
<h3 class="anchored" data-anchor-id="example-4.-we-can-use-python-to-define-lists-of-numbers.">Example 4. We can use Python to define lists of numbers.</h3>
<p>In Python, there are several different data structures that are designed to store more than one element. Here we will focus on the <code>array</code> data structure, but if you are curious to know how and when to use other structures, there is a good explanation <a href="http://www.physics.nyu.edu/pine/pymanual/html/chap3/chap3_arrays.html">here</a>. Let’s define an array:</p>
<div id="qpyodide-insertion-location-8"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
</section>
<section id="example-5.-we-can-manipulate-arrays-by-scalars." class="level3">
<h3 class="anchored" data-anchor-id="example-5.-we-can-manipulate-arrays-by-scalars.">Example 5. We can manipulate arrays by scalars.</h3>
<p>A scalar is a single number. Consider,</p>
<div id="qpyodide-insertion-location-9"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q:</strong> What do you find?</p>
<p><strong>A:</strong> Notice that the scalar operates on each element of the array.</p>
</div>
</div>
</div>
</section>
<section id="example-6.-we-can-manipulate-arrays-with-arrays." class="level3">
<h3 class="anchored" data-anchor-id="example-6.-we-can-manipulate-arrays-with-arrays.">Example 6. We can manipulate arrays with arrays.</h3>
<p>Let’s create an array and multiply it by itself,</p>
<div id="qpyodide-insertion-location-10"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q:</strong> What does this return?</p>
<p><strong>A:</strong> We see that the operator <code>*</code> performs element-by-element multiplication of the values in array <code>a</code>.</p>
</div>
</div>
</div>
</section>
<section id="example-7.-more-examples-of-manipulating-arrays-with-arrays." class="level3">
<h3 class="anchored" data-anchor-id="example-7.-more-examples-of-manipulating-arrays-with-arrays.">Example 7. More examples of manipulating arrays with arrays.</h3>
<div id="qpyodide-insertion-location-11"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q:</strong> What operation does <code>np.multiply()</code> perform?</p>
</div>
</div>
</div>
</section>
<section id="example-8.-we-can-probe-the-variables-weve-defined-in-python." class="level3">
<h3 class="anchored" data-anchor-id="example-8.-we-can-probe-the-variables-weve-defined-in-python.">Example 8. We can probe the variables we’ve defined in Python.</h3>
<p>To see a list of the variables you’ve defined, type <code>who</code> or <code>whos</code> in a code block by themselves. Notice <code>whos</code> provides more information.</p>
<div id="cell-39" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>who</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Interactive namespace is empty.</code></pre>
</div>
</div>
<div id="cell-40" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>whos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Interactive namespace is empty.</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The functions <code>who</code> and <code>whos</code> can be <em>extremely</em> useful, but may not work in a web browser.</p>
</div>
</div>
</section>
<section id="example-9.-determine-the-dimensions-of-an-array" class="level3">
<h3 class="anchored" data-anchor-id="example-9.-determine-the-dimensions-of-an-array">Example 9. Determine the dimensions of an array</h3>
<p>To examine the dimensions of an array, we can ask for the <code>shape</code>,</p>
<div id="qpyodide-insertion-location-12"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>We find that the shape of <code>a</code> is <code>(1,4)</code> or 1 row and 4 columns. Notice we have two options to execute the <code>shape</code> function:</p>
<ul>
<li><p>In <code>a.shape</code> we return the attribute <code>shape</code> of the variable <code>a</code>.</p></li>
<li><p>In <code>np.shape(a)</code> we apply the function <code>shape</code> from <code>numpy</code> to the variable <code>a</code>.</p></li>
</ul>
<p>The result is equivalent.</p>
</section>
<section id="example-10.-sometimes-we-need-to-reset-the-workspace" class="level3">
<h3 class="anchored" data-anchor-id="example-10.-sometimes-we-need-to-reset-the-workspace">Example 10. Sometimes we need to reset the workspace</h3>
<p>By doing so, we get rid of all the variables. To do so, type <code>%reset</code> and enter <code>y</code></p>
<div id="cell-46" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>reset</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q.</strong> What command could we use to confirm there are no variables in the workspace?</p>
<p><strong>A.</strong> Consider <code>who</code>.</p>
</div>
</div>
</div>
<div id="cell-48" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>who</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>%reset</code> command is an example of a <em>magic</em>. Magics are commands that start with the <code>%</code> symbol and use a language other than Python. They are only available in the notebook environment. In fact, the set of magics that is available is specific to the notebook kernel. This means that if you have a Jupyter notebook running a Ruby kernel the magics will be different.</p>
</div>
</div>
</section>
<section id="example-11.-we-can-define-matrices-in-python." class="level3">
<h3 class="anchored" data-anchor-id="example-11.-we-can-define-matrices-in-python.">Example 11. We can define matrices in Python.</h3>
<p>A matrix is an array with more than one dimensio. Consider the following:</p>
<div id="qpyodide-insertion-location-13"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>This creates a matrix with two rows and three columns. Consider,</p>
<div id="qpyodide-insertion-location-14"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q:</strong> Can you see the two rows and three columns?</p>
</div>
</div>
</div>
<p>We can manipulate matrices like we manipulate vectors.</p>
<div id="qpyodide-insertion-location-15"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
</section>
<section id="example-12.-indexing-matrices-and-vectors." class="level3">
<h3 class="anchored" data-anchor-id="example-12.-indexing-matrices-and-vectors.">Example 12. Indexing matrices and vectors.</h3>
<p>Matrices and vectors are arrays of numbers, and sometimes we want to access individual elements or small subsets of these lists. That’s easy to do in Python. Consider,</p>
<div id="qpyodide-insertion-location-16"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>Python indexes from 0 (like C, C++, Java, and unlike MATLAB and Fortran which start at 1). To access the 2nd element of <code>a</code> or <code>b</code>, type <code>a[1] / b[1]</code>. We’ll be a bit fancier with our printing now to distinguish variables. Calling <code>str(a)</code> converts the variable <code>a</code> to a string that can be printed easily. Adding two strings just concatenates them: <code>"hi" + " bye" = "hi bye".</code></p>
<div id="qpyodide-insertion-location-17"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q.</strong> Do the results make sense? How would you access the 4th element of each vector?</p>
</div>
</div>
</div>
<p>We can combine <code>a</code> and <code>b</code> to form a matrix with <code>a</code> as the first row and <code>b</code> as the second. Note that we apply the function <code>array()</code> to the <em>list</em> <code>[a,b]</code>, which it converts to a matrix.</p>
<div id="qpyodide-insertion-location-18"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>To learn the size (or shape) of <code>c</code> we use <code>shape()</code>:</p>
<div id="qpyodide-insertion-location-19"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>The shape of <code>c</code> is <code>[2 5]</code>. It has two rows and five columns. To access the individual element in the 1st row and 4th column of <code>c</code>, type <code>c[0,3]</code></p>
<div id="qpyodide-insertion-location-20"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="python-note">
<p>We access matrices using ‘row, column’ notation. So <code>c[0,3]</code> means print the element in row 0, column 3 of <code>c</code>.</p>
</div>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q.</strong> How would you print all rows in the 2nd column of <code>c</code>?</p>
</div>
</div>
</div>
</section>
<section id="example-13-we-can-find-subsets-of-elements-in-matrices-and-vectors." class="level3">
<h3 class="anchored" data-anchor-id="example-13-we-can-find-subsets-of-elements-in-matrices-and-vectors.">Example 13: We can find subsets of elements in matrices and vectors.</h3>
<p>Often we are interested in only some of the elements of a matrix or vector. For example, we might want to look at the data from a single experimental trial which is stored in a particular row of a matrix. Alternatively, we might want to find out when the values in a time series cross a given boundary. Doing this is simple in Python.</p>
<section id="slicing" class="level4">
<h4 class="anchored" data-anchor-id="slicing">Slicing</h4>
<p><em>Slicing</em> means that we want to look at a specific portion of a vector or matrix, for example, the first row of a matrix. We will continue with the matrix <code>c</code> from the previous example. The notation ‘<code>:</code>’ means ‘<em>all indices</em>’. To access all columns in the entire first row of <code>c</code>, type <code>c[0,:]</code>. To access the 2nd thru 4th columns of the first row of <code>c</code>, type <code>c[0,1:4]</code>.</p>
<div id="qpyodide-insertion-location-21"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="python-note">
<p>The notation <code>1:4</code> means <em>all integers from 1 up to, but not including 4</em>, which in this case gives columns 1, 2, and 3.</p>
</div>
<p>Leaving out the number before the colon tells Python to start at index 0. Leaving out the number after the colon tells Python to continue all the way to the end.</p>
<div id="qpyodide-insertion-location-22"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>We can also tell Python how to step through the indices. To access only the even columns of <code>c</code>, we can use the following:</p>
<div id="qpyodide-insertion-location-23"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>This code tells Python to start at 0, continue to the end, and step by 2. The result should be the values in row 0, columns 0, 2, and 4 of <code>c</code>. We could write this explicitly as <code>c[0,0:5:2]</code>.</p>
<p>#### Selecting elements that satisfy a condition Sometimes we’re interested in locating particular values within a matrix or vector. As an example, let’s first define a vector.</p>
<div id="qpyodide-insertion-location-24"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q.</strong> Calculate the shape of <code>a</code>. What is the maximum value of <code>a</code>? <em>Hint:</em> Use the <code>max()</code> function.</p>
</div>
</div>
</div>
<p>Now let’s find all values in <code>a</code> that exceed 10.</p>
<div id="qpyodide-insertion-location-25"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>This is called logical indexing, let’s look at what <code>a&gt;10</code> returns:</p>
<div id="qpyodide-insertion-location-26"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>When we index <code>a</code> using this array <code>lgIdx</code> we get back only the entries in <code>a</code> corresponding to <code>True</code>, as above:</p>
<div id="qpyodide-insertion-location-27"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>Sometimes we want to know the actual indices in a where <code>a &gt; 10</code>. We can get them using the <code>nonzero()</code> array method, which returns the index of all entries that were <code>True</code>, or non-zero.</p>
<div id="qpyodide-insertion-location-28"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="python-note">
<p>The command <code>nonzero()</code> can be used as both a <em>function</em> and a <em>method</em>. A method is called by adding it after the object it is meant to operate on with a period in between ( <code>lgIdx.nonzero()</code> ). A function is called with the <em>argument</em> explicitly provided inside the parentheses ( <code>nonzero(lgIdx)</code> ). Basically, a function and a method do the same thing, but a function needs to be given an argument, while a method assumes that the argument is the object that the method is attached to. Note that if we use <code>nonzero()</code> as a function, we need to tell it to look in NumPy for the definition (i.e.&nbsp;add `` at the beginning of the function call).</p>
</div>
<p>Now we have another way to select the desired elements of <code>a</code>:</p>
<div id="qpyodide-insertion-location-29"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>We can use these two types of indexing to change subsets of the values of <code>a</code>.</p>
<div id="qpyodide-insertion-location-30"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q:</strong> How does <code>a</code> change in the first and second print statements?</p>
</div>
</div>
</div>
<p>We can perform these same logical operations for a matrix,</p>
<div id="qpyodide-insertion-location-31"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="python-note">
<p>Notice that the last line collapses the <code>True</code> entries to an array, ordered by row and then by column. If you’ve used MATLAB, this is the opposite of what it does!</p>
</div>
</section>
</section>
<section id="example-14-plotting-data-in-python." class="level3">
<h3 class="anchored" data-anchor-id="example-14-plotting-data-in-python.">Example 14: Plotting data in Python.</h3>
<p>It’s not easy to look at lists of numbers and gain an intuitive feeling for their behavior, especially when the lists are long. In these cases, it’s better to visualize the lists of numbers by plotting them. Consider</p>
<div id="qpyodide-insertion-location-32"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q.</strong> Looking at the values in ‘y’ printed above, can you tell what’s happending?</p>
<p><strong>A.</strong> Not really … let’s visualize <code>y</code> vs <code>x</code> instead.</p>
</div>
</div>
</div>
<section id="matplotlib" class="level4">
<h4 class="anchored" data-anchor-id="matplotlib">matplotlib</h4>
<p>To visualize <code>y</code> versus <code>x</code> let’s plot it. To do so, let’s first import some basic plotting routines from <code>matplotlib</code>, which provides a nice <a href="https://matplotlib.org/" rel="external">2D plotting library</a>. We’ll also tell Python to show <code>matplotlib</code> graphics inline, in this notebook.</p>
<p>Let’s start by plotting a simple example for <code>x</code> and <code>y</code>,</p>
<div id="qpyodide-insertion-location-33"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q.</strong> Does the plot above make sense for the variables <code>x</code> and <code>y</code>?</p>
</div>
</div>
</div>
<p>Now, let’s go back to the definitions of <code>x</code> and <code>y</code> that we started this example with and plot <code>y</code> versus <code>x</code>.</p>
<div id="qpyodide-insertion-location-34"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>The plot of <code>x</code> versus <code>y</code> should look a bit jagged, and not smooth like a sinusoid. To make the curve smoother, let’s redefine <code>x</code> as,</p>
<div id="qpyodide-insertion-location-35"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q.</strong> Compare this definition of <code>x</code> to the definition above. How do these two definitions differ?</p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q.</strong> What is the size of <code>x</code>? Does this make sense?</p>
</div>
</div>
</div>
<p>Now let’s replot the sine function.</p>
<div id="qpyodide-insertion-location-36"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q.</strong> Does this plot make sense, given your knowledge of <code>x</code>, <code>y</code>, and trigonometry?</p>
</div>
</div>
</div>
</section>
</section>
<section id="example-15-what-if-we-want-to-compare-several-functions" class="level3">
<h3 class="anchored" data-anchor-id="example-15-what-if-we-want-to-compare-several-functions">Example 15: What if we want to compare several functions?</h3>
<p>Continuing the example in the previous section, let’s define a second vector</p>
<div id="qpyodide-insertion-location-37"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>and plot it:</p>
<div id="qpyodide-insertion-location-38"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>We’d now like to compare the two variables <code>y</code> and <code>z</code>. To do this, let’s plot both vectors on the same figure, label the axes, and provide a legend,</p>
<div id="qpyodide-insertion-location-39"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>Notice that we’ve included a third input to the function <code>plot</code>. Here the third input tells Python to draw the curve in a particular color: <code>'r'</code> for red. There are many options we can use to plot; to see more, check out the documentation for <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.plot.html" rel="external">plot</a>.</p>
<p>We can also label the axes, give the figure a title, and provide a legend,</p>
<div id="qpyodide-insertion-location-40"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>To futher edit this plot, you might decide - for example - that the font size for the labels is too small. We can change the default with:</p>
<div id="qpyodide-insertion-location-41"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
</section>
<section id="example-16-we-can-make-random-numbers-in-python." class="level3">
<h3 class="anchored" data-anchor-id="example-16-we-can-make-random-numbers-in-python.">Example 16: We can make random numbers in Python.</h3>
<p>To generate a single Gaussian random number in Python, use the function in the NumPy <code>random</code> module.</p>
<div id="qpyodide-insertion-location-42"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>Let’s generate a vector of 1000 Gaussian random numbers:</p>
<div id="qpyodide-insertion-location-43"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>… and look at a histogram of the vector:</p>
<div id="qpyodide-insertion-location-44"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q.</strong> Does this histogram make sense? Is it what you expect for a distribution of Gaussian random variables?</p>
</div>
</div>
</div>
<div class="python-note">
<p>See Python Help (<code>hist?</code>) to learn about the function <code>hist()</code>.</p>
</div>
</section>
<section id="example-17-repeating-commands-over-and-over-and-over-.-.-." class="level3">
<h3 class="anchored" data-anchor-id="example-17-repeating-commands-over-and-over-and-over-.-.-.">Example 17: Repeating commands over and over and over . . .</h3>
<p>Sometimes we’ll want to repeat the same command over and over again. For example, what if we want to plot <code>sin(x + k*pi/4)</code> where <code>k</code> varies from 1 to 5 in steps of 1; how do we do it? Consider the following:</p>
<div id="qpyodide-insertion-location-45"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>That’s horrible code! All I did was cut and paste the same thing four times. As a general rule, if you’re repeatedly cutting and pasting in code, what you’re doing is inefficient and typically error prone. There’s a much more elegant way to do this, and it involves making a <code>for</code> loop. Consider:</p>
<div id="qpyodide-insertion-location-46"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>Now let’s declare a <code>for</code> loop where <code>k</code> successively takes the values 1, then 2, then 3, …, up to 5. Note, any code we want to execute as part of the loop must be indented one level. The first line of code that is not indented, in this case <code>show()</code> below, executes after the for loop completes</p>
<div id="qpyodide-insertion-location-47"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>The small section of code above replaces all the cutting-and-pasting. Instead of cutting and pasting, we update the definition of <code>y</code> with different values of <code>k</code> and plot it within this for-loop.</p>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q.</strong> Spend some time studying this for-loop. Does it make sense?</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Important:</strong> Python uses <strong>indentation</strong> to define <code>for</code> loops.</p>
</div>
</div>
</section>
<section id="example-18-defining-a-new-function." class="level3">
<h3 class="anchored" data-anchor-id="example-18-defining-a-new-function.">Example 18: Defining a new function.</h3>
<p>We’ve spent some time in this notebook writing and executing code. Sometimes we’ll need to write our own Python functions. Let’s do that now.</p>
<p>Our function will do something very simple: it will take as input a vector and return as output the vector elements squared plus an additive constant.</p>
<p>If have a vector, <code>v</code>, and a constant, <code>b</code>, we would like to call:</p>
<pre><code>vsq = my_square_function(v, b)</code></pre>
<p>This won’t work! We first need to define <code>my_square_function</code>. Let’s do so now,</p>
<div id="qpyodide-insertion-location-48"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>The function begins with the keyword <code>def</code> followed by the function name and the inputs in parentheses. Notice that this first line ends with a colon <code>:</code>. All of the function components that follow this first line should be <strong>indented one level</strong>. This is just like the <code>for</code> loop we applied earlier; the operations performed by the for loop were indented one leve.</p>
<div class="python-note">
<p>When defining the function, the code the function executes should be indented one level.</p>
</div>
<p>The text inside triple quotes provides an optional documentation string that describes our function. While optional, including a ‘<em>doc string</em>’ is an important part of making your code understandable and reuseable.</p>
<p>The keyword <code>return</code> exits the function, and in this case returns the expression <code>x * x + c</code>. Note that a return statement with no arguments returns <code>None</code>, indicating the absence of a value.</p>
<p>With the function defined, let’s now call it. To do so we first define the inputs, and then run the function, as follows:</p>
<div id="qpyodide-insertion-location-49"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Q.</strong> Try to make a function, my_power, so that <code>y = power(x,n)</code> evaluates <span class="math inline">\(y = x^n\)</span>, (in Python you can use <code>x**n</code> to take the power)</p>
</div>
</div>
</div>
</section>
<section id="example-19-load-data-into-python" class="level3">
<h3 class="anchored" data-anchor-id="example-19-load-data-into-python">Example 19: Load data into Python</h3>
<p>For our last example let’s load a data file on the web in the <code>.csv</code> format into Python.</p>
<p>To do so, let’s first import the <code>pandas</code> module,</p>
<div id="qpyodide-insertion-location-50"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>Now, let’s load a data file using the function <code>read_csv</code>,</p>
<div id="qpyodide-insertion-location-51"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>The variable <code>df</code> that holds the loaded data is a Python <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html">DataFrame</a>. We can think of it as a simple table that holds our data.</p>
<p>Let’s print it,</p>
<div id="qpyodide-insertion-location-52"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>We see that the columns in the dataframe consist of two variables: <code>d</code> and <code>t</code>. Our collaborator who provided the data tells us that these correspond to the voltage recording (<code>d</code>) and a time axis (<code>t</code>) for her data.</p>
<p>Let’s define variables to hold the data corresponding to each key,</p>
<div id="qpyodide-insertion-location-53"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Here we convert the data in each column to a numpy array, because we’d (probably) like numpy to function on these values.</p>
</div>
</div>
<p>Now, let’s plot the LFP data versus the time axis,</p>
<div id="qpyodide-insertion-location-54"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
</section>
<section id="example-20-compute-statistics-and-compare" class="level3">
<h3 class="anchored" data-anchor-id="example-20-compute-statistics-and-compare">Example 20: Compute statistics and compare</h3>
<p>Contributed by <a href="https://github.com/mateouma"><span class="citation" data-cites="mateouma">@mateouma</span></a></p>
<p>Let’s do some statistics. First, our standard imports.</p>
<div id="qpyodide-insertion-location-55"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>With numpy, we can find the mean and standard deviation of our LFP data.</p>
<div id="qpyodide-insertion-location-56"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>Now, let’s use numpy to randomly generate numbers according to a normal distribution with the same mean and standard deviation as the LFP data. The syntax is <code>np.random.normal(mean, sd, size)</code>, where <code>mean</code>, <code>sd</code>, and <code>size</code> are variables or numbers.</p>
<div id="qpyodide-insertion-location-57"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>We can use a histogram to compare the distribution of the data with a normal distribution with the same mean and standard deviation.</p>
<div id="qpyodide-insertion-location-58"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>As we can see, our data doesn’t look normally distributed, but in practice we should use a statistical test to make this assessment.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script type="module">
/**
 * Factory function to create different types of cells based on options.
 * @param {Object} cellData - JSON object containing code, id, and options.
 * @returns {BaseCell} Instance of the appropriate cell class.
 */
globalThis.qpyodideCreateCell = function(cellData) {
    switch (cellData.options.context) {
        case 'interactive':
            return new InteractiveCell(cellData);
        case 'output':
            return new OutputCell(cellData);
        case 'setup':
            return new SetupCell(cellData);
        default:
            return new InteractiveCell(cellData);
            // throw new Error('Invalid cell type specified in options.');
    }
}  

/**
 * CellContainer class for managing a collection of cells.
 * @class
 */
class CellContainer {
    /**
     * Constructor for CellContainer.
     * Initializes an empty array to store cells.
     * @constructor
     */
    constructor() {
        this.cells = [];
    }

    /**
     * Add a cell to the container.
     * @param {BaseCell} cell - Instance of a cell (BaseCell or its subclasses).
     */
    addCell(cell) {
        this.cells.push(cell);
    }

    /**
     * Execute all cells in the container.
     */
    async executeAllCells() {
        for (const cell of this.cells) {
            await cell.executeCode();
        }
    }

    /**
     * Execute all cells in the container.
     */
    async autoRunExecuteAllCells() {
        for (const cell of this.cells) {
            await cell.autoRunExecuteCode();
        }
    }
}
  

/**
 * BaseCell class for handling code execution using Pyodide.
 * @class
 */
class BaseCell {
    /**
     * Constructor for BaseCell.
     * @constructor
     * @param {Object} cellData - JSON object containing code, id, and options.
     */
    constructor(cellData) {
        this.code = cellData.code;
        this.id = cellData.id;
        this.options = cellData.options;
        this.insertionLocation = document.getElementById(`qpyodide-insertion-location-${this.id}`);
        this.executionLock = false;
    }

    cellOptions() {
        // Subclass this? 
        console.log(this.options);
        return this.options;
    }

    /**
     * Execute the Python code using Pyodide.
     * @returns {*} Result of the code execution.
     */
    async executeCode() {
        // Execute code using Pyodide
        const result = getPyodide().runPython(this.code);
        return result;
    }
};

/**
 * InteractiveCell class for creating editable code editor with Monaco Editor.
 * @class
 * @extends BaseCell
 */
class InteractiveCell extends BaseCell {

    /**
     * Constructor for InteractiveCell.
     * @constructor
     * @param {Object} cellData - JSON object containing code, id, and options.
     */
    constructor(cellData) {
        super(cellData);
        this.editor = null;
        this.setupElement();
        this.setupMonacoEditor();
    }

    /**
     * Set up the interactive cell elements
     */
    setupElement() {

        // Create main div element
        var mainDiv = document.createElement('div');
        mainDiv.id = `qpyodide-interactive-area-${this.id}`;
        mainDiv.className = `qpyodide-interactive-area`;
        if (this.options.classes) {
            mainDiv.className += " " + this.options.classes
        }

        // Add a unique cell identifier that users can customize
        if (this.options.label) {
            mainDiv.setAttribute('data-id', this.options.label);
        }

        // Create toolbar div
        var toolbarDiv = document.createElement('div');
        toolbarDiv.className = 'qpyodide-editor-toolbar';
        toolbarDiv.id = `qpyodide-editor-toolbar-${this.id}`;

        // Create a div to hold the left buttons
        var leftButtonsDiv = document.createElement('div');
        leftButtonsDiv.className = 'qpyodide-editor-toolbar-left-buttons';

        // Create a div to hold the right buttons
        var rightButtonsDiv = document.createElement('div');
        rightButtonsDiv.className = 'qpyodide-editor-toolbar-right-buttons';

        // Create Run Code button
        var runCodeButton = document.createElement('button');
        runCodeButton.className = 'btn btn-default qpyodide-button qpyodide-button-run';
        runCodeButton.disabled = true;
        runCodeButton.type = 'button';
        runCodeButton.id = `qpyodide-button-run-${this.id}`;
        runCodeButton.textContent = '🟡 Loading Pyodide...';
        runCodeButton.title = `Run code (Shift + Enter)`;

        // Append buttons to the leftButtonsDiv
        leftButtonsDiv.appendChild(runCodeButton);

        // Create Reset button
        var resetButton = document.createElement('button');
        resetButton.className = 'btn btn-light btn-xs qpyodide-button qpyodide-button-reset';
        resetButton.type = 'button';
        resetButton.id = `qpyodide-button-reset-${this.id}`;
        resetButton.title = 'Start over';
        resetButton.innerHTML = '<i class="fa-solid fa-arrows-rotate"></i>';

        // Create Copy button
        var copyButton = document.createElement('button');
        copyButton.className = 'btn btn-light btn-xs qpyodide-button qpyodide-button-copy';
        copyButton.type = 'button';
        copyButton.id = `qpyodide-button-copy-${this.id}`;
        copyButton.title = 'Copy code';
        copyButton.innerHTML = '<i class="fa-regular fa-copy"></i>';

        // Append buttons to the rightButtonsDiv
        rightButtonsDiv.appendChild(resetButton);
        rightButtonsDiv.appendChild(copyButton);

        // Create console area div
        var consoleAreaDiv = document.createElement('div');
        consoleAreaDiv.id = `qpyodide-console-area-${this.id}`;
        consoleAreaDiv.className = 'qpyodide-console-area';

        // Create editor div
        var editorDiv = document.createElement('div');
        editorDiv.id = `qpyodide-editor-${this.id}`;
        editorDiv.className = 'qpyodide-editor';

        // Create output code area div
        var outputCodeAreaDiv = document.createElement('div');
        outputCodeAreaDiv.id = `qpyodide-output-code-area-${this.id}`;
        outputCodeAreaDiv.className = 'qpyodide-output-code-area';
        outputCodeAreaDiv.setAttribute('aria-live', 'assertive');

        // Create pre element inside output code area
        var preElement = document.createElement('pre');
        preElement.style.visibility = 'hidden';
        outputCodeAreaDiv.appendChild(preElement);

        // Create output graph area div
        var outputGraphAreaDiv = document.createElement('div');
        outputGraphAreaDiv.id = `qpyodide-output-graph-area-${this.id}`;
        outputGraphAreaDiv.className = 'qpyodide-output-graph-area';

        // Append buttons to the toolbar
        toolbarDiv.appendChild(leftButtonsDiv);
        toolbarDiv.appendChild(rightButtonsDiv);

        // Append all elements to the main div
        mainDiv.appendChild(toolbarDiv);
        consoleAreaDiv.appendChild(editorDiv);
        consoleAreaDiv.appendChild(outputCodeAreaDiv);
        mainDiv.appendChild(consoleAreaDiv);
        mainDiv.appendChild(outputGraphAreaDiv);

        // Insert the dynamically generated object at the document location.
        this.insertionLocation.appendChild(mainDiv);
    }

    /**
     * Set up Monaco Editor for code editing.
     */
    setupMonacoEditor() {

        // Retrieve the previously created document elements
        this.runButton = document.getElementById(`qpyodide-button-run-${this.id}`);
        this.resetButton = document.getElementById(`qpyodide-button-reset-${this.id}`);
        this.copyButton = document.getElementById(`qpyodide-button-copy-${this.id}`);
        this.editorDiv = document.getElementById(`qpyodide-editor-${this.id}`);
        this.outputCodeDiv = document.getElementById(`qpyodide-output-code-area-${this.id}`);
        this.outputGraphDiv = document.getElementById(`qpyodide-output-graph-area-${this.id}`);
        
        // Store reference to the object
        var thiz = this;

        // Load the Monaco Editor and create an instance
        require(['vs/editor/editor.main'], function () {
            thiz.editor = monaco.editor.create(
                thiz.editorDiv, {
                    value: thiz.code,
                    language: 'python',
                    theme: 'vs-light',
                    automaticLayout: true,           // Works wonderfully with RevealJS
                    scrollBeyondLastLine: false,
                    minimap: {
                        enabled: false
                    },
                    fontSize: '17.5pt',              // Bootstrap is 1 rem
                    renderLineHighlight: "none",     // Disable current line highlighting
                    hideCursorInOverviewRuler: true,  // Remove cursor indictor in right hand side scroll bar
                    readOnly: thiz.options['read-only'] ?? false
                }
            );
        
            // Store the official counter ID to be used in keyboard shortcuts
            thiz.editor.__qpyodideCounter = thiz.id;
        
            // Store the official div container ID
            thiz.editor.__qpyodideEditorId = `qpyodide-editor-${thiz.id}`;
        
            // Store the initial code value and options
            thiz.editor.__qpyodideinitialCode = thiz.code;
            thiz.editor.__qpyodideOptions = thiz.options;
        
            // Set at the model level the preferred end of line (EOL) character to LF.
            // This prevent `\r\n` from being given to the Pyodide engine if the user is on Windows.
            // See details in: https://github.com/coatless/quarto-Pyodide/issues/94
            // Associated error text: 
            // Error: <text>:1:7 unexpected input
        
            // Retrieve the underlying model
            const model = thiz.editor.getModel();
            // Set EOL for the model
            model.setEOL(monaco.editor.EndOfLineSequence.LF);
        
            // Dynamically modify the height of the editor window if new lines are added.
            let ignoreEvent = false;
            const updateHeight = () => {
            const contentHeight = thiz.editor.getContentHeight();
            // We're avoiding a width change
            //editorDiv.style.width = `${width}px`;
            thiz.editorDiv.style.height = `${contentHeight}px`;
                try {
                    ignoreEvent = true;
            
                    // The key to resizing is this call
                    thiz.editor.layout();
                } finally {
                    ignoreEvent = false;
                }
            };
        
            // Helper function to check if selected text is empty
            function isEmptyCodeText(selectedCodeText) {
                return (selectedCodeText === null || selectedCodeText === undefined || selectedCodeText === "");
            }
        
            // Registry of keyboard shortcuts that should be re-added to each editor window
            // when focus changes.
            const addPyodideKeyboardShortCutCommands = () => {
            // Add a keydown event listener for Shift+Enter to run all code in cell
            thiz.editor.addCommand(monaco.KeyMod.Shift | monaco.KeyCode.Enter, () => {
                // Retrieve all text inside the editor
                thiz.runCode(thiz.editor.getValue());
            });
        
            // Add a keydown event listener for CMD/Ctrl+Enter to run selected code
            thiz.editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.Enter, () => {
                    // Get the selected text from the editor
                    const selectedText = thiz.editor.getModel().getValueInRange(thiz.editor.getSelection());
                    // Check if no code is selected
                    if (isEmptyCodeText(selectedText)) {
                        // Obtain the current cursor position
                        let currentPosition = thiz.editor.getPosition();
                        // Retrieve the current line content
                        let currentLine = thiz.editor.getModel().getLineContent(currentPosition.lineNumber);
                
                        // Propose a new position to move the cursor to
                        let newPosition = new monaco.Position(currentPosition.lineNumber + 1, 1);
                
                        // Check if the new position is beyond the last line of the editor
                        if (newPosition.lineNumber > thiz.editor.getModel().getLineCount()) {
                            // Add a new line at the end of the editor
                            thiz.editor.executeEdits("addNewLine", [{
                            range: new monaco.Range(newPosition.lineNumber, 1, newPosition.lineNumber, 1),
                            text: "\n", 
                            forceMoveMarkers: true,
                            }]);
                        }
                        
                        // Run the entire line of code.
                        thiz.runCode(currentLine);
                
                        // Move cursor to new position
                        thiz.editor.setPosition(newPosition);
                    } else {
                        // Code to run when Ctrl+Enter is pressed with selected code
                        thiz.runCode(selectedText);
                    }
                });
            }
        
            // Register an on focus event handler for when a code cell is selected to update
            // what keyboard shortcut commands should work.
            // This is a workaround to fix a regression that happened with multiple
            // editor windows since Monaco 0.32.0 
            // https://github.com/microsoft/monaco-editor/issues/2947
            thiz.editor.onDidFocusEditorText(addPyodideKeyboardShortCutCommands);
        
            // Register an on change event for when new code is added to the editor window
            thiz.editor.onDidContentSizeChange(updateHeight);
        
            // Manually re-update height to account for the content we inserted into the call
            updateHeight();
                
        });

        
        // Add a click event listener to the run button
        thiz.runButton.onclick = function () {
            thiz.runCode(
                thiz.editor.getValue()
            );
        };
        
        // Add a click event listener to the reset button
        thiz.copyButton.onclick = function () {
            // Retrieve current code data
            const data = thiz.editor.getValue();
            
            // Write code data onto the clipboard.
            navigator.clipboard.writeText(data || "");
        };
        
        // Add a click event listener to the copy button
        thiz.resetButton.onclick = function () {
            thiz.editor.setValue(thiz.editor.__qpyodideinitialCode);
        };
    }

    disableInteractiveCells() {
        // Enable locking of execution for the cell
        this.executionLock = true;

        // Disallowing execution of other code cells
        document.querySelectorAll(".qpyodide-button-run").forEach((btn) => {
            btn.disabled = true;
        });
    }

    enableInteractiveCells() {
        // Remove locking of execution for the cell
        this.executionLock = false;

        // All execution of other code cells
        document.querySelectorAll(".qpyodide-button-run").forEach((btn) => {
            btn.disabled = false;
        });
    }

    /**
     * Execute the Python code inside the editor.
     */
    async runCode(code) {
        
        // Check if we have an execution lock
        if (this.executeLock) return; 
        
        this.disableInteractiveCells();

        // Force wait procedure
        await mainPyodide;

        // Clear the output stock
        qpyodideResetOutputArray();

        // Generate a new canvas element, avoid attaching until the end
        let graphFigure = document.createElement("figure");
        document.pyodideMplTarget = graphFigure;

        console.log("Running code!");
        // Obtain results from the base class
        try {
            // Always check to see if the user adds new packages
            await mainPyodide.loadPackagesFromImports(code);

            // Process result
            const output = await mainPyodide.runPythonAsync(code);

            // Add output
            qpyodideAddToOutputArray(output, "stdout");
        } catch (err) {
            // Add error message
            qpyodideAddToOutputArray(err, "stderr");
            // TODO: There has to be a way to remove the Pyodide portion of the errors... 
        }

        const result = qpyodideRetrieveOutput();

        // Nullify the output area of content
        this.outputCodeDiv.innerHTML = "";
        this.outputGraphDiv.innerHTML = "";        

        // Design an output object for messages
        const pre = document.createElement("pre");
        if (/\S/.test(result)) {
            // Display results as HTML elements to retain output styling
            const div = document.createElement("div");
            div.innerHTML = result;
            pre.appendChild(div);
        } else {
            // If nothing is present, hide the element.
            pre.style.visibility = "hidden";
        }

        // Add output under interactive div
        this.outputCodeDiv.appendChild(pre);

        // Place the graphics onto the page
        if (graphFigure) {

            if (this.options['fig-cap']) {
                // Create figcaption element
                const figcaptionElement = document.createElement('figcaption');
                figcaptionElement.innerText = this.options['fig-cap'];
                // Append figcaption to figure
                graphFigure.appendChild(figcaptionElement);    
            }

            this.outputGraphDiv.appendChild(graphFigure);
        }

        // Re-enable execution
        this.enableInteractiveCells();
    }
};

/**
 * OutputCell class for customizing and displaying output.
 * @class
 * @extends BaseCell
 */
class OutputCell extends BaseCell {
    /**
     * Constructor for OutputCell.
     * @constructor
     * @param {Object} cellData - JSON object containing code, id, and options.
     */
    constructor(cellData) {
      super(cellData);
    }
  
    /**
     * Display customized output on the page.
     * @param {*} output - Result to be displayed.
     */
    displayOutput(output) {
        const results = this.executeCode();
        return results;
    }
  }

/**
 * SetupCell class for suppressed output.
 * @class
 * @extends BaseCell
 */
class SetupCell extends BaseCell {
    /**
     * Constructor for SetupCell.
     * @constructor
     * @param {Object} cellData - JSON object containing code, id, and options.
     */
    constructor(cellData) {
        super(cellData);
    }

    /**
     * Execute the Python code without displaying the results.
     */
    runSetupCode() {
        // Execute code without displaying output
        this.executeCode();
    }
};
</script>
<script type="module">
// Handle cell initialization initialization
qpyodideCellDetails.map(
    (entry) => {
      // Handle the creation of the element
      qpyodideCreateCell(entry);
    }
  );
</script>




</body></html>